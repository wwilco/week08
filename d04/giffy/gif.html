<html>
  <head>
    <title>gif or die</title>
  </head>
  <body>
      <input type= "text" id= "searcher" placeholder= "search gifs">
      <button id="button">send it</button>
      <img  />
      <button id="nextbutton"> next gif </button></button>
      <button id="prevbutton"> prev gif </button></button>

  <script>

  var button = document.getElementById("button");

  button.addEventListener("click", function() {
    var search = document.getElementById("searcher");
    var searchVal = search.value;
    var url_safe = encodeURI(searchVal);

    var url = "http://api.giphy.com/v1/gifs/search?q=" + url_safe + "&api_key=dc6zaTOxFJmzC";
    // console.log(url);
    var xhr = new XMLHttpRequest();

    xhr.open("GET", url);

    xhr.addEventListener('load' , function() {
      var data = xhr.responseText
      var parsed = JSON.parse(data);
      var gif = document.querySelector("img");
      var i = 0;
      gif.setAttribute("src", parsed["data"][i]["images"]["original"]["url"]);

      var next = document.getElementById("nextbutton");
      next.addEventListener("click", function() {
        var search = document.getElementById("searcher");
        var searchVal = search.value;
        var url_safe = encodeURI(searchVal);

        var url = "http://api.giphy.com/v1/gifs/search?q=" + url_safe + "&api_key=dc6zaTOxFJmzC";
        // console.log(url);
        var xhr = new XMLHttpRequest();

        xhr.open("GET", url);

        xhr.addEventListener('load' , function() {
          var data = xhr.responseText
          var parsed = JSON.parse(data);
          var gif = document.querySelector("img");
          i++;
          gif.setAttribute("src", parsed["data"][i]["images"]["original"]["url"]);
        })
        xhr.send();
      });

      var prev = document.getElementById("prevbutton");
      prev.addEventListener("click", function() {
        var search = document.getElementById("searcher");
        var searchVal = search.value;
        var url_safe = encodeURI(searchVal);

        var url = "http://api.giphy.com/v1/gifs/search?q=" + url_safe + "&api_key=dc6zaTOxFJmzC";
        // console.log(url);
        var xhr = new XMLHttpRequest();

        xhr.open("GET", url);

        xhr.addEventListener('load' , function() {
          var data = xhr.responseText
          var parsed = JSON.parse(data);
          var gif = document.querySelector("img");
          i--;
          gif.setAttribute("src", parsed["data"][i]["images"]["original"]["url"]);
        })
        xhr.send();
      });
    });
    xhr.send();
  });



  </script>
  </body>
</html>
